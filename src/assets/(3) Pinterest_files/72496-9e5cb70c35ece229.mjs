"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[72496],{969548:(e,a,l)=>{var n;l.r(a),l.d(a,{default:()=>i});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupLink_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadFormId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{kind:"InlineDataFragmentSpread",name:"getPinTrackingParamsMap_pin",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,concreteType:"TrackingParamsMap",kind:"LinkedField",name:"trackingParamsMap",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}]}],args:null,argumentDefinitions:[]}],type:"Pin",abstractKey:null};t.hash="2f8b7ad02619a272640140b4402e0cfc";let i=t},498594:(e,a,l)=>{var n,t,i;l.r(a),l.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollageChips_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinTagChipImagesPerSpec",kind:"LinkedField",name:"pinTagsChips",plural:!0,selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"spec",value:"750x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:[t,i,n],storageKey:'images(spec:"750x")'}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CollageChips_pin2"}],type:"Pin",abstractKey:null};r.hash="ccfee94118043ad859460cc7806b13e4";let s=r},387944:(e,a,l)=>{l.r(a),l.d(a,{default:()=>t});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollageChips_pin2",selections:[{args:null,kind:"FragmentSpread",name:"CloseupLink_pin"}],type:"Pin",abstractKey:null};n.hash="df1a502b4660ea1f2f0f126f142daec4";let t=n},798580:(e,a,l)=>{l.d(a,{Z:()=>o});var n=l(624797);let t=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,i=(e,a)=>a?e.substring(a.length).split("/")[0]:e,r=({boardUrl:e,path:a,pinId:l,pinnerUserName:r,search:s,storyPinDataId:o})=>{if(!a)return"";switch(a){case"/":case"/homefeed/":return"UserHomefeedResource";case r&&`/${r}/pins/`:return"UserPinsResource";case r&&`/${r}/`:case/\/_activity\//.test(a)&&a:return"UserActivityPinsResource";case/\/_created\//.test(a)&&a:return o?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(a)&&a:return"UserDiscoveredPinsResource";case/\/_saved\//.test(a)&&a:return"BoardlessPinsResource";case r&&`/${r}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(a)&&a:return"VisualLiveSearchResource";case/\/pin\//.test(a)&&a:let d=i(a,"/pin/");if(l!==d)return`RelatedPinFeedResource_${d}`;break;case/\/search\//.test(a)&&a:if(s){let e=(0,n.mB)(s,{shouldDecode:!1}).q||"";return`SearchResource_${e.toLowerCase()}`}break;case/\/categories\//.test(a)&&a:let u=i(a,"/categories/");return`CategoryFeedResource_${u}`;case/\/discover\/topics\//.test(a)&&a:return"CategoryFeedResource";case/\/news_hub\//.test(a)&&a:let c=i(a,"/news_hub/");return`NewsHubDetailsResource_${c}`;case/\/_tools\/more-ideas\//.test(a)&&a:return"BoardContentRecommendationResource";case/\/topics\//.test(a)&&a:let p=i(a,"/topics/");return`TopicFeedResource_${p}`;case/\/source\//.test(a)&&a:let g=i(a,"/source/");return`DomainFeedResource_${g}`;case/\/explore\//.test(a)&&a:let y=i(a,"/explore/");return`SearchResource_${y}`;case e:case!!e&&/\/more_ideas\//.test(a)&&a:return"BoardFeedResource";case e&&a.indexOf(e)>-1&&a:return"BoardSectionPinsResource";case/\/brand_catalog\//.test(a)&&a:return"BrandCatalogFeedResource";case t.test(a)&&a:let m=a.match(t)?.[2]||"unknown";return`TodayArticleFeedResource_${m}`;case/\/today\//.test(a):return"TodayTabResource";case/\story_feed\//.test(a)&&a:if(s){let{feed_type:e,request_params:a}=(0,n.mB)(s);return`StoryFeedResource_${e}_${a}`}}return""},s=e=>{let a=e?.pathname;return a?(a.match(/\/search\//)&&e?.search&&(a+=e.search),a.toLowerCase()):""},o=({boardUrl:e,location:a,pinId:l,pinnerUserName:n,previousHistory:t,storyPinDataId:i,trackingParams:o,trackingParamsMap:d={}})=>{let u,c;if(!l||!o||!a)return;if(!d)return`${o??""}~0`;let{pathname:p,search:g}=a,y=r({boardUrl:e,path:p,pinId:l,pinnerUserName:n,search:g,storyPinDataId:i,trackingParams:o,trackingParamsMap:d}),m=Object.keys(d);if((p||"").startsWith("/pin/")){let e=m.find(e=>"PinResource"!==e);u=e?d[e]:d.PinResource}else u=d[y];return!u&&t&&t.length&&(c=r({boardUrl:e,path:s(t[t.length-1].location),pinId:l,pinnerUserName:n,search:g,storyPinDataId:i,trackingParams:o,trackingParamsMap:d}),u=d[c]),u||(u=`${o||""}~0`),u}},998449:(e,a,l)=>{l.d(a,{Z:()=>i});let n=(e,a)=>0===e.lastIndexOf(a,0);var t=l(885896);let i=({url:e})=>{let a=(0,t.Z)("/");return n(e,a)?e.substr(a.length-1):e}},363074:(e,a,l)=>{l.d(a,{Z:()=>u});var n=l(667294);let t=new Map,i=null,r=e=>{e.forEach(e=>{let a=t.get(e.target);a&&a(e)})},s=e=>{i.unobserve(e),t.delete(e)},o=(e,a="-64px 0px 0px 0px",l)=>{let n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:a,threshold:[0,.5,1]};i=i||new window.IntersectionObserver(r,n),t.set(e,l),i.observe(e)},d=e=>t.has(e);function u({onVisibilityChanged:e,trackFullVisible:a,rootMargin:l}){let i=(0,n.useRef)(null),r=!1,u=a=>{(r=a.intersectionRatio>0||a.isIntersecting)&&e(!0)},c=()=>{i.current instanceof HTMLElement&&d(i.current)&&r&&(e(!1),r=!1)},p=(0,n.useCallback)(e=>{i.current instanceof HTMLElement&&o(i.current,e,e=>{if(!t.has(i.current))return;let l=a?e.intersectionRatio>=1:e.intersectionRatio>=.5,n=a?0===e.intersectionRatio:!l;!r&&l?u(e):r&&n&&c()})},[i.current]);return(0,n.useEffect)(()=>(p(l),()=>{i.current instanceof HTMLElement&&(c(),s(i.current))}),[p]),i}},239821:(e,a,l)=>{l.d(a,{g:()=>p,I:()=>c});var n=l(667294),t=l(342513),i=l(705895),r=l(259866);let s={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},o=(e=s,a)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===a.type&&e.showTypeaheadOverlay!==a.payload)return{...e,showTypeaheadOverlay:a.payload};if("SET_CURRENT_VIDEO"===a.type){let{payload:l}=a,{pinId:n,isPromoted:t,currentTime:i,allowMultipleOrganicVideos:s}=l,{videosAutoplaying:o}=e,{currentlyPlayingOrganicVideoId:d,promotedVideosAutoplaying:u,organicVideosAutoplaying:c}=o,p=(0,r.Z)(u),g=(0,r.Z)(c);return t||!d||s?(t?p[n]={pinId:n,currentTime:i,paused:!1}:g[n]={pinId:n,currentTime:i,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:t?d:n,promotedVideosAutoplaying:p,organicVideosAutoplaying:g}}):e}if("SET_IS_AUTOPLAY"===a.type&&e.isAutoplay!==a.payload)return{...e,isAutoplay:a.payload};if("PAUSE_CURRENT_VIDEO"===a.type){let{payload:l}=a,{pinId:n,isPromoted:t,currentTime:i}=l,{videosAutoplaying:s}=e,{promotedVideosAutoplaying:o,organicVideosAutoplaying:d}=s,u=(0,r.Z)(o),c=(0,r.Z)(d);return t?u[n]={...u[n],paused:!0,currentTime:i}:c[n]={...c[n],paused:!0,currentTime:i},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:u,organicVideosAutoplaying:c}}}if("SET_APP_FOCUS_STATE"===a.type&&e.appInFocus!==a.payload)return{...e,appInFocus:a.payload};if("SET_VIEWPORT_SIZE"===a.type&&e.viewportSize!==a.payload)return{...e,viewportSize:a.payload};if("SET_FOOTER_VISIBILITY_STATE"===a.type&&e.footerPlusButtonVisible!==a.payload)return{...e,footerPlusButtonVisible:a.payload};return e};var d=l(785893);let{Provider:u,useHook:c}=(0,t.Z)("AppUI");function p({children:e}){let[a,l]=(0,n.useReducer)(o,s),t=(0,n.useCallback)(e=>l({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),r=(0,n.useCallback)(e=>l({type:"SET_APP_FOCUS_STATE",payload:e}),[]),c=(0,n.useCallback)(e=>l({type:"SET_CURRENT_VIDEO",payload:e}),[]),p=(0,n.useCallback)(e=>l({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),g=(0,n.useCallback)(e=>l({type:"SET_IS_AUTOPLAY",payload:e}),[]),y=(0,n.useCallback)(e=>l({type:"SET_VIEWPORT_SIZE",payload:e}),[]),m=(0,n.useCallback)(e=>l({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),_=(0,n.useMemo)(()=>({pauseAutoplay:t,setCurrentVideo:c,setFooterPlusButtonVisible:p,setIsAutoplay:g,setViewportSize:y,toggleTypeaheadOverlay:m,setAppFocusState:r,appUI:a}),[t,c,p,g,y,m,r,a]);return(0,n.useEffect)(()=>{i.Z.onSessionResume(()=>{r(!0)}).onSessionPause(()=>{r(!1)})},[r]),(0,d.jsx)(u,{value:_,children:e})}},392071:(e,a,l)=>{l.d(a,{Z:()=>g}),l(167912);var n,t,i=l(883119),r=l(207012),s=l(807023),o=l(340523),d=l(182074),u=l(785893);let c={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}},p=void 0!==n?n:n=l(498594);function g({pinKey:e,enableCloseupLink:a}){let n=(0,r.Z)(p,e),{checkExperiment:g}=(0,o.F)(),{anyEnabled:y}=g("aid_web_collection_pin_data"),{childDataKey__DEPRECATED:m}=(0,s.Q)(void 0!==t?t:t=l(387944),n,{useLegacyAdapter:e=>({})}),{aggregatedPinData:_,collectionPin:h}=n,{pinTagsChips:S}=_||{},{itemData:k}=h||{},f=S&&S.length>=3?S.slice(0,3):[],I=k&&k.length>=3?k.slice(0,3):[];return y?(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:c.chipContainer},display:"flex",children:I.map(e=>{let l=e.images||{},n=(0,u.jsx)(i.Ee,{alt:"",fit:"cover",naturalHeight:l.height??1,naturalWidth:l.width??1,role:"presentation",src:l.url??""});return(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:c.chip},"data-test-id":"collageChip",children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:c.chipInner},position:"relative",children:(0,u.jsx)(i.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsx)(i.zd,{height:"100%",wash:!0,width:"100%",children:a?(0,u.jsx)(d.Z,{collageChipId:e.pinId??"",pinKey:m,sizing:"fullSize",children:n}):n})})})},e.pinId)})}):(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:c.chipContainer},display:"flex",children:f.map(e=>{let l=e.image||{},n=(0,u.jsx)(i.Ee,{alt:"",fit:"cover",naturalHeight:l.height??1,naturalWidth:l.width??1,role:"presentation",src:l.url??""});return(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:c.chip},"data-test-id":"collageChip",children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:c.chipInner},position:"relative",children:(0,u.jsx)(i.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsx)(i.zd,{height:"100%",wash:!0,width:"100%",children:a?(0,u.jsx)(d.Z,{collageChipId:e.entityId??"",pinKey:m,sizing:"fullSize",children:n}):n})})})},e.entityId)})})}},182074:(e,a,l)=>{l.d(a,{Z:()=>k}),l(167912);var n,t=l(883119),i=l(598356),r=l(214877),s=l(207012),o=l(140017),d=l(340370),u=l(456299),c=l(340523),p=l(5859),g=l(427514),y=l(268127),m=l(149722),_=l(879977),h=l(785893);let S=void 0!==n?n:n=l(969548);function k({sizing:e="default",children:a,collageChipId:l,componentType:n,contextLogData:k,elementType:f,disableA11yLabel:I,isEggsUi:T,pinKey:v,derivedSaveButtonOptionsSavedInfo:F,productTagParentPinId:P,viewParameter:b,viewType:E}){let R;let w=(0,o.ZP)(),{isRTL:x}=(0,p.B)(),A=(0,s.Z)(S,v),{logContextEvent:C}=(0,r.v)(),L=(0,_.E)(),{checkExperiment:K}=(0,c.F)(),{isAuth:D}=(0,m.Z)(),O=K("web_contextual_board_suggestions").anyEnabled,Z=K("web_easy_gift_guide_saving",{dangerouslySkipActivation:!0}).anyEnabled,U=L.contextLogData?.story_type==="product_tagged_shopping_module_upsell",V=["polished_stacked_closeup"].includes(!x&&K(D?"closeup_auth_related_pins_above_fold_2024_dweb":"closeup_unauth_related_pins_above_fold_2024_dweb").group||""),j=D&&K("closeup_dweb_remove_magnifying_glass").anyEnabled,{carouselData:B,entityId:$}=A,z=!!A.promotedIsLeadAd,H={},M=`/pin/${l||$}/`,Y=(0,i.Xx)();if(Y?.variantUrl&&(M=`/pin/${Y.variantUrl}/`),B){let{carouselSlots:e,entityId:a}=B,l=B.index??0;M=`/pin/${$}/`,H={carousel_slot_id:e?.[l]&&e[l].entityId,carousel_data_id:a,carousel_slot_index:l}}let N=(0,y.Z)(A);H={...H,...N({default:k?.commerce_data})};let W=()=>{let e={};if(z)C({event_type:8948,view_type:E||L.viewType,view_parameter:b||L.viewParameter,component:null,object_id_str:A.entityId,aux_data:{closeup_navigation_type:"click",lead_form_id:A.promotedLeadForm?.leadFormId,is_lead_ad:1}}),C({event_type:12,view_type:E||L.viewType,view_parameter:b||L.viewParameter,component:null,object_id_str:A.entityId,aux_data:{lead_form_id:A.promotedLeadForm?.leadFormId,is_lead_ad:1,...N()}});else{let a={...k,...N({default:k?.commerce_data})};C({event_type:101,component:n||L.componentType,element:f,object_id_str:$,view_type:E||L.viewType,view_parameter:b||L.viewParameter,aux_data:a}),U&&(e={storyPinProductEventData:{productPinIdStr:$,pinIdStr:P}}),C({aux_data:{closeup_navigation_type:"click",...a},component:n||L.componentType,element:f,event_data:e,event_type:8948,object_id_str:$,view_type:E||L.viewType,view_parameter:b||L.viewParameter})}};O&&F&&(R=F);let G={pathname:M,state:{board:{...R},fromEggsBoard:T}},q=(0,d.Z)({href:(O||Z)&&R?G:M,externalData:{auxData:H,pin:A&&{advertiserId:A.advertiserId,attributionSourceId:A.attributionSourceId,board:A.board&&{url:A.board.url},campaignId:A.campaignId,entityId:A.entityId,isDownstreamPromotion:A.isDownstreamPromotion,isPromoted:A.isPromoted,pinner:A.pinner&&{username:A.pinner.username},pinPromotionId:A.pinPromotionId,promoter:A.promoter&&{entityId:A.promoter.entityId},storyPinDataId:A.storyPinDataId,trackingParams:A.trackingParams,trackingParamsMap:(0,u.Z)(A)}}});return(0,h.jsx)(t.Tg,{accessibilityLabel:I?void 0:(0,g.Z)(w._('{{ pinTitle }} pin page', 'pinRep.closeupLink.tapArea.accessibilityLabel', 'Accessibility label with pin title on individual links'),{pinTitle:A.gridTitle||A.title||A.description||""}),fullHeight:"fullSize"===e,fullWidth:"fullSize"===e,href:M,mouseCursor:V||j?void 0:"zoomIn",onTap:({event:e,dangerouslyDisableOnNavigation:a})=>{a(),W(),q({event:e})},rounding:2,children:a})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/72496-9e5cb70c35ece229.mjs.map